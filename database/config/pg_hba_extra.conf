# =============================================================================
# Configuração de segurança PostgreSQL para EVAonline - PRODUÇÃO SEGURA
# =============================================================================

# Conexões locais (trust apenas para desenvolvimento)
# EM PRODUÇÃO: Trocar "trust" por "md5" ou "scram-sha-256"
local   all             all                                     trust

# Conexões IPv4 locais
host    all             all             127.0.0.1/32            md5
host    all             all             ::1/128                 md5

# Conexões da rede Docker
host    all             all             172.16.0.0/12           md5
host    all             all             10.0.0.0/8              md5

# Conexões da aplicação
host    all             all             0.0.0.0/0               md5

# Conexões de replicação (se necessário)
host    replication     all             127.0.0.1/32            md5
host    replication     all             ::1/128                 md5

# =============================================================================
# CONFIGURAÇÕES ADICIONAIS DE SEGURANÇA
# =============================================================================

# Bloquear tentativas excessivas (comentado - configurar no postgresql.conf)
# host all all 0.0.0.0/0 md5 auth_delay.milliseconds=1000

# Log de conexões bem-sucedidas (útil para auditoria)
# log_connections = on
# log_disconnections = on